<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title> Malla Curricular Interactiva </title>
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
<style>
  /* Paleta pastel con fondo lila */
  body {
    font-family: 'Poppins', sans-serif;
    background-color: #d9c7f9; /* lila pastel */
    color: #3a2a5f;
    margin: 20px;
    padding: 0;
  }

  h1 {
    text-align: center;
    color: #5a2393; /* morado fuerte */
    font-weight: 700;
    font-size: 2.8rem;
    margin-bottom: 10px;
  }

  /* Contenedor principal: horizontal scroll para semestres */
  #contenedor {
    display: flex;
    gap: 20px;
    overflow-x: auto;
    padding-bottom: 10px;
  }

  /* Cada semestre en columna */
  .semestre {
    background: #f7e8ff; /* lila muy claro */
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(90, 35, 147, 0.2);
    padding: 15px 20px;
    min-width: 280px;
    flex-shrink: 0;
  }

  .semestre h2 {
    text-align: center;
    margin-bottom: 15px;
    color: #5a2393;
    font-weight: 600;
    font-size: 1.6rem;
    user-select: none;
  }

  /* Ramo estilo cuaderno pastel */
  .ramo {
    background-color: #fff0f6; /* rosa pastel */
    border-left: 6px solid #a1cfff; /* azul pastel */
    border-radius: 10px;
    padding: 10px 15px;
    margin-bottom: 12px;
    box-shadow: 0 3px 6px rgba(90, 35, 147, 0.12);
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: border-color 0.3s ease, background-color 0.3s ease;
  }

  /* Cambios de color por estado */
  .ramo.reprobado {
    border-left-color: #f66a6a; /* rojo pastel */
    background-color: #fdeaea;
  }
  .ramo.examen {
    border-left-color: #f7c677; /* amarillo pastel */
    background-color: #fff9e6;
  }
  .ramo.eximido {
    border-left-color: #8fc77b; /* verde pastel */
    background-color: #ebf6e8;
  }

  /* Label del ramo */
  .ramo label {
    flex-grow: 1;
    margin-right: 12px;
    font-weight: 500;
    font-size: 1rem;
  }

  /* Input para nota */
  .ramo input[type="number"] {
    width: 55px;
    padding: 5px 8px;
    font-size: 1rem;
    border-radius: 8px;
    border: 1.8px solid #ccc;
    text-align: center;
    transition: border-color 0.3s ease;
  }

  /* Input deshabilitado */
  .ramo input[type="number"]:disabled {
    background-color: #ddd;
    border-color: #aaa;
    cursor: not-allowed;
  }

  /* Al pasar el mouse sobre ramo habilitado */
  .ramo:hover:not(.reprobado):not(.examen):not(.eximido) {
    border-left-color: #5a2393;
    background-color: #f1e6ff;
  }

  /* Scrollbar para #contenedor */
  #contenedor::-webkit-scrollbar {
    height: 10px;
  }
  #contenedor::-webkit-scrollbar-track {
    background: #e0d7ff;
    border-radius: 10px;
  }
  #contenedor::-webkit-scrollbar-thumb {
    background: #5a2393;
    border-radius: 10px;
  }
</style>
</head>
<body>
  <h1> Malla Curricular Interactiva </h1>
  <div id="contenedor"></div>

<script>
  const ramos = [
    // Primer semestre
    { nombre: "Introducci贸n a la contabilidad", semestre: 1, abre: ["Contabilidad financiera"] },
    { nombre: "Normativa empresarial I", semestre: 1, abre: ["Normativa empresarial II"] },
    { nombre: "Gesti贸n de organizaciones I", semestre: 1, abre: ["Gesti贸n de organizaciones II"] },
    { nombre: "Lengua materna y autorregulaci贸n", semestre: 1 },
    { nombre: "Matem谩ticas I", semestre: 1, abre: ["Matem谩ticas II", "Econom铆a I"] },

    // Segundo semestre
    { nombre: "Contabilidad financiera", semestre: 2, requiere: ["Introducci贸n a la contabilidad"], abre: ["Normativa contable IFRS"] },
    { nombre: "Normativa empresarial II", semestre: 2, requiere: ["Normativa empresarial I"], abre: ["Normativa tributaria"] },
    { nombre: "Gesti贸n de organizaciones II", semestre: 2, requiere: ["Gesti贸n de organizaciones I"], abre: ["Gesti贸n de capital humano", "Gesti贸n comercial"] },
    { nombre: "Introducci贸n a la auditor铆a", semestre: 2, abre: ["Control interno y gesti贸n de riesgos"] },
    { nombre: "Econom铆a I", semestre: 2, requiere: ["Matem谩ticas I"], abre: ["Econom铆a II", "Costos para la toma de decisiones I"] },
    { nombre: "Matem谩ticas II", semestre: 2, requiere: ["Matem谩ticas I"], abre: ["Estad铆stica"] },

    // Tercer semestre
    { nombre: "Normativa contable IFRS", semestre: 3, requiere: ["Contabilidad financiera"], abre: ["Normativa contable NIC SP", "Taller de integraci贸n perfil UV I", "Contabilidad avanzada I", "Proyecto de investigaci贸n"] },
    { nombre: "Normativa tributaria", semestre: 3, requiere: ["Normativa empresarial II"], abre: ["Impuestos I", "Taller de integraci贸n perfil UV I"] },
    { nombre: "TIC para los negocios", semestre: 3, abre: ["Taller de integraci贸n perfil UV I"] },
    { nombre: "Econom铆a II", semestre: 3, requiere: ["Econom铆a I"], abre: ["Taller de integraci贸n perfil UV I"] },
    { nombre: "Estad铆stica", semestre: 3, requiere: ["Matem谩ticas II"], abre: ["Estad铆stica para los negocios", "Taller de integraci贸n perfil UV I"] },
    { nombre: "Control interno y gesti贸n de riesgos", semestre: 3, requiere: ["Introducci贸n a la auditor铆a"], abre: ["Fundamentos de auditor铆a", "Ejecuci贸n de proyectos de auditor铆a", "Auditor铆a de sistemas", "Proyecto de investigaci贸n", "Pr谩ctica temprana"] },

    // Cuarto semestre
    { nombre: "Fundamentos de auditor铆a", semestre: 4, requiere: ["Control interno y gesti贸n de riesgos"], abre: ["Taller de integraci贸n perfil UV I"] },
    { nombre: "Normativa contable NIC SP", semestre: 4, requiere: ["Normativa contable IFRS"], abre: ["Pr谩ctica temprana"] },
    { nombre: "Impuestos I", semestre: 4, requiere: ["Normativa tributaria"], abre: ["Tributaci贸n aplicada I", "Pr谩ctica temprana"] },
    { nombre: "Costos para la toma de decisiones I", semestre: 4, requiere: ["Econom铆a I"], abre: ["Pr谩ctica temprana"] },
    { nombre: "Estad铆stica para los negocios", semestre: 4, requiere: ["Estad铆stica"], abre: ["Bases y aplicaci贸n de ciencias de datos", "Costos para la toma de decisiones II"] },
    { nombre: "Ingl茅s I", semestre: 4, abre: ["Ingl茅s II"] },

    // Quinto semestre
    { nombre: "Bases y aplicaci贸n de ciencias de datos", semestre: 5, requiere: ["Estad铆stica para los negocios"], abre: ["Ejecuci贸n de proyectos de auditor铆a"] },
    { nombre: "Tributaci贸n aplicada I", semestre: 5, requiere: ["Impuestos I"], abre: ["Impuestos II"] },
    { nombre: "Gesti贸n de capital humano", semestre: 5, requiere: ["Gesti贸n de organizaciones II"] },
    { nombre: "Costos para la toma de decisiones II", semestre: 5, requiere: ["Estad铆stica para los negocios"], abre: ["Introducci贸n a las finanzas", "Gesti贸n de operaciones"] },
    { nombre: "Ingl茅s II", semestre: 5, requiere: ["Ingl茅s I"], abre: ["Ingl茅s III"] },
    { nombre: "Taller de integraci贸n perfil UV I", semestre: 5, requiere: ["Normativa contable IFRS", "Normativa tributaria", "TIC para los negocios", "Econom铆a II", "Estad铆stica", "Fundamentos de auditor铆a"], abre: ["Taller de integraci贸n perfil UV II"] },

    // Sexto semestre
    { nombre: "Contabilidad avanzada I", semestre: 6, requiere: ["Normativa contable IFRS"], abre: ["Contabilidad avanzada II"] },
    { nombre: "Impuestos II", semestre: 6, requiere: ["Tributaci贸n aplicada I"], abre: ["Tributaci贸n aplicada II", "Proyecto de investigaci贸n"] },
    { nombre: "Gesti贸n comercial", semestre: 6, requiere: ["Gesti贸n de organizaciones II"], abre: ["Gesti贸n de operaciones"] },
    { nombre: "Introducci贸n a las finanzas", semestre: 6, requiere: ["Costos para la toma de decisiones II"], abre: ["Finanzas corporativas", "Proyecto de investigaci贸n", "Gesti贸n financiera"] },
    { nombre: "Ingl茅s III", semestre: 6, requiere: ["Ingl茅s II"], abre: ["Ingl茅s IV"] },
    { nombre: "Taller de integraci贸n perfil UV II", semestre: 6, requiere: ["Taller de integraci贸n perfil UV I"] },
    { nombre: "Ejecuci贸n de proyectos de auditor铆a", semestre: 6, requiere: ["Bases y aplicaci贸n de ciencias de datos", "Control interno y gesti贸n de riesgos"] },

    // S茅ptimo semestre
    { nombre: "Contabilidad avanzada II", semestre: 7, requiere: ["Contabilidad avanzada I"], abre: ["Contabilidad avanzada III", "Auditor铆a de estados financieros", "Electivo 1 profesional", "Electivo 2 profesional", "Electivo 3 profesional", "Direcci贸n gerencial", "Pr谩ctica profesional"] },
    { nombre: "Tributaci贸n aplicada II", semestre: 7, requiere: ["Impuestos II"], abre: ["Gesti贸n tributaria", "Electivo 1 profesional", "Electivo 2 profesional", "Electivo 3 profesional", "Direcci贸n gerencial", "Pr谩ctica profesional"] },
    { nombre: "Gesti贸n de operaciones", semestre: 7, requiere: ["Gesti贸n comercial", "Costos para la toma de decisiones II"], abre: ["Planificaci贸n y control de gesti贸n", "Electivo 1 profesional", "Electivo 2 profesional", "Electivo 3 profesional", "Direcci贸n gerencial"] },
    { nombre: "Auditor铆a de sistemas", semestre: 7, requiere: ["Control interno y gesti贸n de riesgos"], abre: ["Electivo 1 profesional", "Electivo 2 profesional", "Electivo 3 profesional", "Direcci贸n gerencial"] },
    { nombre: "Finanzas corporativas", semestre: 7, requiere: ["Introducci贸n a las finanzas"], abre: ["Electivo 1 profesional", "Electivo 2 profesional", "Electivo 3 profesional", "Formulaci贸n y evaluaci贸n de proyectos de inversi贸n", "Direcci贸n gerencial"] },
    { nombre: "Ingl茅s IV", semestre: 7, requiere: ["Ingl茅s III"], abre: ["Electivo 1 profesional", "Electivo 2 profesional", "Electivo 3 profesional", "Direcci贸n gerencial"] },
    { nombre: "Proyecto de investigaci贸n", semestre: 7, requiere: ["Normativa contable IFRS", "Control interno y gesti贸n de riesgos", "Impuestos II", "Introducci贸n a las finanzas"], abre: ["Investigaci贸n aplicada", "Electivo 1 profesional", "Electivo 2 profesional", "Electivo 3 profesional", "Direcci贸n gerencial"] },
    { nombre: "Pr谩ctica temprana", semestre: 7, requiere: ["Normativa contable NIC SP", "Impuestos I", "Costos para la toma de decisiones I", "Control interno y gesti贸n de riesgos"], abre: ["Electivo 1 profesional", "Electivo 2 profesional", "Electivo 3 profesional", "Direcci贸n gerencial", "Pr谩ctica profesional"] },

    // Octavo semestre
    { nombre: "Contabilidad avanzada III", semestre: 8, requiere: ["Contabilidad avanzada II"], abre: ["Taller de integraci贸n profesional"] },
    { nombre: "Gesti贸n tributaria", semestre: 8, requiere: ["Tributaci贸n aplicada II"], abre: ["Taller de integraci贸n profesional"] },
    { nombre: "Planificaci贸n y control de gesti贸n", semestre: 8, requiere: ["Gesti贸n de operaciones"], abre: ["Taller de integraci贸n profesional"] },
    { nombre: "Auditor铆a de estados financieros", semestre: 8, requiere: ["Contabilidad avanzada II"], abre: ["Pr谩ctica profesional", "Taller de integraci贸n profesional"] },
    { nombre: "Gesti贸n financiera", semestre: 8, requiere: ["Introducci贸n a las finanzas"], abre: ["Taller de integraci贸n profesional"] },
    { nombre: "Investigaci贸n aplicada", semestre: 8, requiere: ["Proyecto de investigaci贸n"], abre: ["Taller de integraci贸n profesional"] },

    // Noveno semestre
    { nombre: "Electivo 1 profesional", semestre: 9 },
    { nombre: "Electivo 2 profesional", semestre: 9 },
    { nombre: "Electivo 3 profesional", semestre: 9 },
    { nombre: "Formulaci贸n y evaluaci贸n de proyectos de inversi贸n", semestre: 9, requiere: ["Finanzas corporativas"] },
    { nombre: "Direcci贸n gerencial", semestre: 9 },
    { nombre: "Pr谩ctica profesional", semestre: 9 },

    // D茅cimo semestre
    { nombre: "Taller de integraci贸n profesional", semestre: 10 }
  ];

  const contenedor = document.getElementById("contenedor");
  const estados = JSON.parse(localStorage.getItem("estadoRamos") || '{}');

  function actualizarLocalStorage() {
    localStorage.setItem("estadoRamos", JSON.stringify(estados));
  }

  // Funci贸n para determinar el estado del ramo seg煤n nota
  function evaluar(nota) {
    if (nota === "") return "";
    const n = parseFloat(nota);
    if (n < 4.0) return "reprobado";
    if (n >= 5.0) return "eximido";
    return "examen"; // 4.0 a 4.9
  }

  // Actualiza nota y refresca render
  function actualizarEstado(nombre, nota) {
    estados[nombre] = nota;
    actualizarLocalStorage();
    render();
  }

  // Verifica si los requisitos est谩n aprobados con nota >= 4.0
  function cumpleRequisitos(ramo) {
    if (!ramo.requiere) return true;
    return ramo.requiere.every(req => {
      const notaReq = parseFloat(estados[req] || 0);
      return notaReq >= 4.0;
    });
  }

  // Renderiza toda la malla curricular
  function render() {
    contenedor.innerHTML = "";

    // Recorrer semestres del 1 al 10
    for (let s = 1; s <= 10; s++) {
      const divSemestre = document.createElement("div");
      divSemestre.classList.add("semestre");
      const h2 = document.createElement("h2");
      h2.textContent = `Semestre ${s}`;
      divSemestre.appendChild(h2);

      // Filtra ramos del semestre s
      const ramosDelSemestre = ramos.filter(r => r.semestre === s);

      ramosDelSemestre.forEach(ramo => {
        const divRamo = document.createElement("div");
        divRamo.classList.add("ramo");

        const nota = estados[ramo.nombre] || "";
        const estado = evaluar(nota);

        // Cambiar color seg煤n estado
        if (estado) divRamo.classList.add(estado);

        // Bloquear input si no cumple requisitos o est谩 reprobado
        const habilitado = cumpleRequisitos(ramo) && estado !== "reprobado";

        const label = document.createElement("label");
        label.textContent = ramo.nombre;

        const input = document.createElement("input");
        input.type = "number";
        input.min = "1";
        input.max = "7";
        input.step = "0.1";
        input.value = nota;
        input.disabled = !habilitado;

        input.addEventListener("change", () => {
          actualizarEstado(ramo.nombre, input.value);
        });

        divRamo.appendChild(label);
        divRamo.appendChild(input);
        divSemestre.appendChild(divRamo);
      });

      contenedor.appendChild(divSemestre);
    }
  }

  render();
</script>
</body>
</html>
