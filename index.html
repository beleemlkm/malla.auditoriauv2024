<!DOCTYPE html>

<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>游닂 Malla Auditor칤a UV 游냠游꺚</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #fef6ff, #f9fcff);
      margin: 0;
      padding: 2rem;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #6a0dad;
      font-size: 2rem;
    }
    .semestres {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
      padding: 1rem;
    }
    .semestre {
      background: #fff;
      border-radius: 1rem;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 1rem;
      min-width: 220px;
      flex-shrink: 0;
    }
    .semestre h2 {
      text-align: center;
      color: #6a0dad;
    }
    .ramo {
      margin: 0.5rem 0;
      padding: 0.5rem;
      border-radius: 0.5rem;
      background: #fafafa;
      transition: background 0.3s, transform 0.2s;
      position: relative;
      border: 1px solid #ddd;
    }
    .ramo.locked {
      background: #f3f3f3;
      opacity: 0.6;
      pointer-events: none;
    }
    .ramo.aprobado {
      text-decoration: line-through;
      background: #e0f7e9;
    }
    .ramo.aprobado-examen {
      text-decoration: line-through;
      background: #fff6d6;
    }
    .ramo.reprobado {
      text-decoration: line-through;
      background: #ffe6e6;
    }
    .ramo:hover {
      background: #f0eaff;
      transform: scale(1.01);
    }
    input {
      width: 3rem;
      margin-left: 0.5rem;
    }
  </style>
</head>
<body>
  <h1>游닂 Malla Curricular Auditor칤a UV 游냠游꺚</h1>
  <div class="semestres" id="malla"></div>
  <script>
    const datos = [
      {
        semestre: "Primer semestre",
        ramos: [
          { nombre: "Introducci칩n a la contabilidad", abre: ["Contabilidad financiera"] },
          { nombre: "Normativa empresarial I", abre: ["Normativa empresarial II"] },
          { nombre: "Gesti칩n de organizaciones I", abre: ["Gesti칩n de organizaciones II"] },
          { nombre: "Lengua materna y autorregulaci칩n" },
          { nombre: "Matem치ticas I", abre: ["Matem치ticas II", "Econom칤a I"] },
        ],
      },
      {
        semestre: "Segundo semestre",
        ramos: [
          { nombre: "Contabilidad financiera", abre: ["Normativa contable IFRS"], dependeDe: ["Introducci칩n a la contabilidad"] },
          { nombre: "Normativa empresarial II", abre: ["Normativa tributaria"], dependeDe: ["Normativa empresarial I"] },
          { nombre: "Gesti칩n de organizaciones II", abre: ["Gesti칩n de capital humano", "Gesti칩n comercial"], dependeDe: ["Gesti칩n de organizaciones I"] },
          { nombre: "Introducci칩n a la auditor칤a", abre: ["Control interno y gesti칩n de riesgos"] },
          { nombre: "Econom칤a I", abre: ["Econom칤a II", "Costos para la toma de decisiones I"], dependeDe: ["Matem치ticas I"] },
          { nombre: "Matem치ticas II", abre: ["Estad칤stica"], dependeDe: ["Matem치ticas I"] },
        ],
      },
      // Puedes continuar agregando m치s semestres aqu칤 usando el mismo formato
    ];

```
const malla = document.getElementById("malla");
const estadoNotas = JSON.parse(localStorage.getItem("notas-malla")) || {};

function actualizarEstado() {
  localStorage.setItem("notas-malla", JSON.stringify(estadoNotas));
}

function actualizarRamos() {
  document.querySelectorAll(".ramo").forEach((div) => {
    const nombre = div.dataset.nombre;
    const nota = parseFloat(estadoNotas[nombre]);
    div.classList.remove("aprobado", "reprobado", "aprobado-examen");
    if (!isNaN(nota)) {
      if (nota < 4.0) div.classList.add("reprobado");
      else if (nota >= 5.0) div.classList.add("aprobado");
      else div.classList.add("aprobado-examen");
    }
  });

  // Revisi칩n de dependencias
  const desbloqueados = new Set();
  for (const semestre of datos) {
    for (const ramo of semestre.ramos) {
      const nota = parseFloat(estadoNotas[ramo.nombre]);
      if (!isNaN(nota) && nota >= 4.0) {
        desbloqueados.add(ramo.nombre);
        (ramo.abre || []).forEach((r) => desbloqueados.add(r));
      }
    }
  }

  document.querySelectorAll(".ramo").forEach((div) => {
    const nombre = div.dataset.nombre;
    const depende = div.dataset.depende;
    if (!depende) return;
    const deps = depende.split(",");
    const activo = deps.every((d) => desbloqueados.has(d));
    if (!activo) div.classList.add("locked");
    else div.classList.remove("locked");
  });
}

for (const semestre of datos) {
  const col = document.createElement("div");
  col.className = "semestre";
  const titulo = document.createElement("h2");
  titulo.textContent = semestre.semestre;
  col.appendChild(titulo);

  for (const ramo of semestre.ramos) {
    const div = document.createElement("div");
    div.className = "ramo";
    div.dataset.nombre = ramo.nombre;
    if (ramo.dependeDe) div.dataset.depende = ramo.dependeDe.join(",");

    const label = document.createElement("label");
    label.textContent = ramo.nombre;
    const input = document.createElement("input");
    input.type = "number";
    input.min = 1;
    input.max = 7;
    input.step = 0.1;
    input.value = estadoNotas[ramo.nombre] || "";

    input.addEventListener("change", () => {
      estadoNotas[ramo.nombre] = input.value;
      actualizarEstado();
      actualizarRamos();
    });

    label.appendChild(input);
    div.appendChild(label);
    col.appendChild(div);
  }

  malla.appendChild(col);
}

actualizarRamos();
```

  </script>
</body>
</html>
